<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ModelVault</title>
  <style>
    body { font-family: sans-serif; margin: 2em; }
    .file-list { list-style: none; padding: 0; }
    .file-list li { margin: 0.5em 0; cursor: pointer; }
  </style>
</head>
<body>
  <h1>ModelVault ファイル一覧</h1>
  <ul id="file-list" class="file-list"></ul>
  <button id="back" style="display:none;">戻る</button>

  <script>
    const ACCESS_TOKEN = "sl.u.AF-Zk76TJQemZ2yiqtB_Y0WrvQ-eWjeurPtd_f4KiyW_VLMJYVqxuXKdCDCwecHms5VCt4RMoSDUmC95LPi4iHW5WJsmUA81IQ9ZvET25exSDChqrtkDTTV6wRBwueRq0feOpLhEv5PUNaDYO7ngLn40nk5OstutDoAPhIyTCVqXjGDkr39cdokS8VhD7DoWUXK5cPdM2kpE8oH-OkQHwj7gkYFiI94mSTm0-iYN-zSzx2IPYQgy1k48SCKhqJEEeDcwMKL6act_LuooB9Tid59JkG_69hTkNSiikL3BhVvWJotKvPTW0eXa-PeHS9ZMuOkULwkYByvtetnWYqBrlb_Dw1YWHKuTRGbJmA9AEiZ7oXOIx4PoQHeOXZK61imYNhdC989GtUKLFJcR83Kd5nips9OKHosOZIEGkGB3GkdJBtSmwv-P3qqIFl5tVSr1ltRc-4_yaSr9Qw75SOg3iVqxmUbCGQkLYEV9aMv8963tD__uhanVwn0Xot5UaWF0YnuFSKhs1tELbfMrxobg43uJ-Xhyxx74s-iZIkH6kffOjTMAULQTBYZ--0rerCoajetQ6OHqH2rzvJ5dkxsojJ-EghXBqmTlCcRkIXiuBTkrTmQvEyFz2liYHjszLTHPv8OSxLV_6aenEb2HQMo_DZfXx-iojPQdK-8zKnzktxuY-Er5GGs0FAGniKLGM7ffytV5AklLyUisYb1YyJcpsK9YjCLxnudOEFgQsgTQ493FYakX2iOT_F8y_ExZnp-IKIlRjJZ2h0GgSft2GDqCo1A2w6woQBfsodVeveV4AgkAgODwr8zw6HlhqZU2lHwMuDQKHxiX9KHcDfTjlKwgY32H9_83m5RT-fHRld3NKKCehtoxz_ccI2c0FnPNljsvV_mbSQ9CPnJogo_WROso0-V0pifCD7XLjnn8_tz56AbSH3zF8PNWXEZUxXdU3EmJTHjwUzz6rM-gVPt-BSbPmBS85g8pKnbr7f8RSQeJWa2A3gBO-gVz1tknQ7ECCf1Gr8GPvKd0ew3llZDfthJTC15FmIHB4i0J-Opb6a4yami_4qevtBVWEOannbr0y9Gn-SJA5bNe3tg5FLU5onmpHJ1B0EMVLYrMJXN7AwuSuMmIICWfb3CYpUCUz-Nk284WvUcZ-hIuatYn21CCL8nmbWTE0F46h-X4QEHhu2Rd9cmmN4IkDJYORH2F2M0Zefe_nbXObjUsDSPx8T15hom3XftcG-_ss9ZDbJ62OF5SLIhCduAqgKNTRFvcLqwSyai8h2U";

    let currentPath = "";

    async function fetchFiles(path) {
      const response = await fetch(DROPBOX_API, {
        method: "POST",
        headers: {
          "Authorization": "Bearer " + ACCESS_TOKEN,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ path: path })
      });

      const data = await response.json();
      console.log(data);

      const list = document.getElementById("file-list");
      list.innerHTML = "";

      const backBtn = document.getElementById("back");
      backBtn.style.display = path ? "inline" : "none";
      backBtn.onclick = () => {
        fetchFiles("");
        currentPath = "";
      }

      data.entries.forEach(entry => {
        const li = document.createElement("li");
        li.textContent = entry.name;

        if (entry[".tag"] === "folder") {
          li.onclick = () => {
            currentPath = entry.path_lower;
            fetchFiles(entry.path_lower);
          }
        }

        // ファイルも名前だけ表示
        list.appendChild(li);
      });
    }

    fetchFiles("");
  </script>
</body>
</html>
